<div class="container-fluid py-4">
      <div class="row">
        <div class="col-12">
          <!-- Header -->
          <div class="mb-4">
            <h1 class="text-primary-custom mb-3">
              <i class="fas fa-file-alt me-2"></i>
              Système de Gestion des Demandes
            </h1>
            <p class="text-secondary">Interface modernisée avec votre palette de couleurs personnalisée</p>
          </div>

          <!-- PDF Viewer Section -->
          <app-pdf-viewer 
            [pdfSrc]="pdfSrc"
            (backClicked)="handleBack()">
          </app-pdf-viewer>

          <!-- Main Content Card -->
          <div class="card-custom" *ngIf="selectedData">
            <!-- Action Buttons -->
            <app-action-buttons
              [config]="actionButtonsConfig"
              (submitAdvice)="handleSubmitAdvice()"
              (validate)="handleValidate()"
              (deliver)="handleDeliver()"
              (openDialog)="handleOpenDialog()">
            </app-action-buttons>

            <!-- PDF Content -->
            <div class="card-body p-0" *ngIf="selectedData.filename">
              <object 
                [data]="pdfSrc" 
                type="application/pdf" 
                width="100%" 
                height="600px"
                class="w-100">
              </object>
            </div>
          </div>

          <!-- Response Display -->
          <app-response-display
            *ngIf="responseData"
            [responseData]="responseData"
            (showNote)="handleShowNote($event)">
          </app-response-display>

          <!-- Decision Form -->
          <app-decision-form
            *ngIf="showDecisionForm"
            [responseData]="currentDecision"
            [isSigner]="isSigner"
            [loading]="loading"
            (formSubmit)="handleDecisionSubmit($event)"
            (decisionChange)="handleDecisionChange($event)"
            (cancel)="handleDecisionCancel()">
          </app-decision-form>

          <!-- Loading State -->
          <div class="text-center py-5" *ngIf="!selectedData && loading">
            <div class="spinner-border text-primary-custom" style="width: 3rem; height: 3rem;" role="status">
              <span class="visually-hidden">Chargement...</span>
            </div>
            <p class="mt-3 text-secondary">Chargement des données...</p>
          </div>
        </div>
      </div>
    </div>

<ng-template #dialogAffectation  let-c="close" let-d="dismiss" >
    <form #addInstruction="ngForm" (ngSubmit)="authorized(addInstruction.value)">

        <div class="modal-header">
            <h4 class="modal-title" id="modal-basic-title">Signer ce document</h4>
            <button type="button" class="btn btn-dark"  (click)="d('Cross click')"> <i class="fa fa-times"></i></button>
        </div>
      <div class="modal-body">
            <div class="form-group">
                <label for="">Saisissez votre mot de passe de délivrance</label>
                <input name="password" type="password" class="form-control" required ngModel>
            </div>
        </div>
    <div class="modal-footer">
        <button type="submit" class="btn btn-outline-primary" [disabled]="addInstruction.invalid || loading">Signer <app-loading [isVisible]="loading"></app-loading> </button>
    </div>

</form>

</ng-template>


